{% assign number_help = context.params.number | default: 100 | plus: 0 %}
{% liquid
  graphql films = 'film/search', number: number_help, search: context.params.search
%}

<form action="/index" method="get">
  <label for="number">See the top: </label>
  <input type="number" name="number" id="number">
  <input type="text" name="search" id="search">
  <button type="submit" class="rounded px-4 py-1 bg-slate-400 hover:bg-slate-500">Search</button>
</form>

{% for item in films.records.results %}
    <div class="card">
      <div class="container">
        <img src="{{ item.cover }}" width="275" height="400" loading="eager" style="width: 275px; height: 400px">
        <h4><b>Title: {{ item.title }}</b></h4>
        <p>User: {{ item.username }}</p>
        <p>Age: {{ item.age }}</p>
        <p>Rating: {{ item.rating }}</p>
        <p>{{ item.comment }}</p>
        <form action="/film/delete" method="post">
            <input type="hidden" name="id" value="{{ item.id }}">
            <button type="submit" class="rounded px-4 py-1 bg-red-500 hover:bg-red-600">Delete</button>
        </form>
      </div>
    </div>
{% endfor %}

{% if films.records.total_entries == 0 %}
  <div>There are no films in the list.</div>
{% endif %}

<div class="form-container mb-5">
  <form action="/film/create" method="post">

    <label for="title">Title: </label>
    <input type="text" id="title" name="title" placeholder="Title of the movie" required>

    <label for="username">Username: </label>
    <input type="text" id="username" name="username" placeholder="Obi-Van" required>

    <label for="age">Age: </label>
    <input type="number" id="age" name="age" required><br><br>

    <label for="rating">Rating (0-5): </label>
    <div class="slider">
      <input type="range" min="0" max="5" value="4" name="rating" id="rating" oninput="rangeValue.innerText = this.value">
      <p id="rangeValue">4</p>
    </div>

    <label for="comment">Comment: </label>
    <textarea id="comment" name="comment" placeholder="Write something.." style="height: 150px" required></textarea>

	  <label for="cover">Cover image url: </label>
    <input type="text" id="cover" name="cover" required><br><br>

    <input type="submit" value="Add your film and opinion">

  </form>
</div>